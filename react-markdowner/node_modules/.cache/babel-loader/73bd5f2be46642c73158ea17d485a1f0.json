{"ast":null,"code":"import _classCallCheck from\"/Users/jonas/Documents/react_markdowner/react-markdowner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jonas/Documents/react_markdowner/react-markdowner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jonas/Documents/react_markdowner/react-markdowner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jonas/Documents/react_markdowner/react-markdowner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/jonas/Documents/react_markdowner/react-markdowner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jonas/Documents/react_markdowner/react-markdowner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import logo from\"./logo.svg\";import\"./App.css\";import MarkdownRenderer from\"react-markdown-renderer\";import{ThemeProvider}from\"emotion-theming\";import theme from\"@rebass/preset\";import{Flex,Box,Text,Button}from\"rebass\";import socketIOClient from\"socket.io-client\";import Pdf from\"react-to-pdf\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);//const [markdown, setMarkdown] = React.useState(\"\");\nfunction App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.ws=new WebSocket(\"ws://192.168.1.13:8765/\");_this.handleMarkdownChange=function(event){_this.setState({markdown:event.target.value},function(){//console.log(JSON.stringify({\"message\": this.state.markdown}));\n_this.ws.send(JSON.stringify({message:_this.state.markdown}));});};_this.handleDocumentTitleChange=function(event){_this.setState({documentTitle:event.target.value},function(){//console.log(JSON.stringify({\"message\": this.state.markdown}));\n//this.ws.send(JSON.stringify({ message: this.state.markdown }));\nconsole.log(\"banana\");});};_this.state={markdown:\"\",documentTitle:\"\"};_this.handleMarkdownChange=_this.handleMarkdownChange.bind(_assertThisInitialized(_this));_this.downloadMd=_this.downloadMd.bind(_assertThisInitialized(_this));_this.expRef=React.createRef();return _this;}_createClass(App,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;this.ws.onopen=function(evt){// on connecting, do nothing but log it to the console\nconsole.log(\"connected\");//console.log(evt)\n//this.setState({markdown: evt.data.value})\n};this.ws.onmessage=function(evt){// listen to data sent from the websocket server\n//const message = JSON.parse(evt.data)\nconsole.log(JSON.parse(evt.data)[\"value\"]);var message=JSON.parse(evt.data)[\"value\"];_this2.setState({markdown:message});};this.ws.onclose=function(){console.log(\"disconnected\");// automatically try to reconnect on connection loss\n};}},{key:\"downloadMd\",value:function downloadMd(){var text=this.state.markdown;var blob=new Blob([text],{type:\".md\"});var a=document.createElement(\"a\");a.download=this.state.documentTitle+\".md\";a.href=URL.createObjectURL(blob);a.dataset.downloadurl=[\".md\",a.download,a.href].join(\":\");a.style.display=\"none\";document.body.appendChild(a);a.click();document.body.removeChild(a);setTimeout(function(){URL.revokeObjectURL(a.href);},1500);}},{key:\"render\",value:function render(){return React.createElement(\"div\",{id:\"root\",style:{display:\"flex\",width:\"100%\",height:\"100%\"}},React.createElement(ThemeProvider,{theme:theme},React.createElement(Flex,{flexDirection:\"column\"},React.createElement(Flex,{flexShrink:1},React.createElement(Box,{px:2,py:1,width:1},React.createElement(Text,{fontSize:[3,4,5],fontWeight:\"bold\",color:\"primary\"},\"Simple markdown preview app\"),React.createElement(\"input\",{value:this.state.documentTitle,onChange:this.handleDocumentTitleChange,placeholder:\"Document Name\",style:{fontWeight:\"bold\",fontSize:\"48px\",border:\"none\",backgroundColor:\"transparent\",outline:\"none\"}}))),React.createElement(Flex,{flexGrow:1},React.createElement(Box,{p:3,width:1/2,color:\"white\",bg:\"primary\",flexGrow:1},React.createElement(\"textarea\",{autoFocus:true,value:this.state.markdown,onChange:this.handleMarkdownChange,style:{fontFamily:\"Helvetica\",color:\"white\",border:\"none\",width:\"100%\",height:\"100%\",backgroundColor:\"transparent\",outline:\"none\",resize:\"none\"}})),React.createElement(Flex,{p:3,width:1/2,color:\"black\",bg:\"muted\",flexDirection:\"column\",justifyContent:\"space-between\",alignItems:\"center\",flexGrow:1},React.createElement(Box,{px:2,py:1,width:1,flexGrow:1,ref:this.expRef},React.createElement(MarkdownRenderer,{markdown:this.state.markdown})),React.createElement(Flex,{px:2,py:1,width:1,flexShrink:1,justifyContent:\"space-around\"},React.createElement(Pdf,{targetRef:this.expRef,filename:this.state.documentTitle+\".pdf\"},function(_ref){var toPdf=_ref.toPdf;return React.createElement(Button,{onClick:toPdf,sx:{transition:\"0.4s\",\":hover\":{backgroundColor:\"tomato\",transition:\"0.2s\"}}},\"Download as PDF\");}),React.createElement(Button,{onClick:this.downloadMd,sx:{transition:\"0.4s\",\":hover\":{backgroundColor:\"tomato\",transition:\"0.2s\"}}},\"Download as .md\")))))));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/jonas/Documents/react_markdowner/react-markdowner/src/App.js"],"names":["React","MarkdownRenderer","ThemeProvider","theme","Flex","Box","Text","Button","socketIOClient","Pdf","App","props","ws","WebSocket","handleMarkdownChange","event","setState","markdown","target","value","send","JSON","stringify","message","state","handleDocumentTitleChange","documentTitle","console","log","bind","downloadMd","expRef","createRef","onopen","evt","onmessage","parse","data","onclose","text","blob","Blob","type","a","document","createElement","download","href","URL","createObjectURL","dataset","downloadurl","join","style","display","body","appendChild","click","removeChild","setTimeout","revokeObjectURL","width","height","fontWeight","fontSize","border","backgroundColor","outline","fontFamily","color","resize","toPdf","transition","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\nimport MarkdownRenderer from \"react-markdown-renderer\";\nimport { ThemeProvider } from \"emotion-theming\";\nimport theme from \"@rebass/preset\";\nimport { Flex, Box, Text, Button } from \"rebass\";\nimport socketIOClient from \"socket.io-client\";\nimport Pdf from \"react-to-pdf\";\n\nclass App extends React.Component {\n  //const [markdown, setMarkdown] = React.useState(\"\");\n  constructor(props) {\n    super(props);\n    this.state = {\n      markdown: \"\",\n      documentTitle: \"\"\n    };\n    this.handleMarkdownChange = this.handleMarkdownChange.bind(this);\n    this.downloadMd = this.downloadMd.bind(this);\n    this.expRef = React.createRef();\n  }\n\n  ws = new WebSocket(\"ws://192.168.1.13:8765/\");\n\n  componentWillMount() {\n    this.ws.onopen = evt => {\n      // on connecting, do nothing but log it to the console\n      console.log(\"connected\");\n      //console.log(evt)\n      //this.setState({markdown: evt.data.value})\n    };\n\n    this.ws.onmessage = evt => {\n      // listen to data sent from the websocket server\n      //const message = JSON.parse(evt.data)\n      console.log(JSON.parse(evt.data)[\"value\"]);\n      const message = JSON.parse(evt.data)[\"value\"];\n      this.setState({ markdown: message });\n    };\n\n    this.ws.onclose = () => {\n      console.log(\"disconnected\");\n      // automatically try to reconnect on connection loss\n    };\n  }\n\n  handleMarkdownChange = event => {\n    this.setState({ markdown: event.target.value }, () => {\n      //console.log(JSON.stringify({\"message\": this.state.markdown}));\n      this.ws.send(JSON.stringify({ message: this.state.markdown }));\n    });\n  };\n\n  handleDocumentTitleChange = event => {\n    this.setState({ documentTitle: event.target.value }, () => {\n      //console.log(JSON.stringify({\"message\": this.state.markdown}));\n      //this.ws.send(JSON.stringify({ message: this.state.markdown }));\n      console.log(\"banana\")\n    });\n  };\n\n  downloadMd() {\n    var text = this.state.markdown;\n    var blob = new Blob([text], { type: \".md\" });\n\n    var a = document.createElement(\"a\");\n    a.download = this.state.documentTitle + \".md\";\n    a.href = URL.createObjectURL(blob);\n    a.dataset.downloadurl = [\".md\", a.download, a.href].join(\":\");\n    a.style.display = \"none\";\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    setTimeout(function() {\n      URL.revokeObjectURL(a.href);\n    }, 1500);\n  }\n\n  render() {\n    return (\n      <div id=\"root\" style={{ display: \"flex\", width: \"100%\", height: \"100%\" }}>\n        <ThemeProvider theme={theme}>\n          <Flex flexDirection={\"column\"}>\n            <Flex flexShrink={1}>\n              <Box px={2} py={1} width={1}>\n                <Text fontSize={[3, 4, 5]} fontWeight=\"bold\" color=\"primary\">\n                  Simple markdown preview app\n                </Text>\n                <input\n                  value={this.state.documentTitle}\n                  onChange={this.handleDocumentTitleChange}\n                  placeholder=\"Document Name\"\n                  style={{\n                    fontWeight: \"bold\",\n                    fontSize: \"48px\",\n                    border: \"none\",\n                    backgroundColor: \"transparent\",\n                    outline: \"none\"\n                  }}\n                />\n              </Box>\n            </Flex>\n            <Flex flexGrow={1}>\n              <Box p={3} width={1 / 2} color=\"white\" bg=\"primary\" flexGrow={1}>\n                <textarea\n                  autoFocus\n                  value={this.state.markdown}\n                  onChange={this.handleMarkdownChange}\n                  style={{\n                    fontFamily: \"Helvetica\",\n                    color: \"white\",\n                    border: \"none\",\n                    width: \"100%\",\n                    height: \"100%\",\n                    backgroundColor: \"transparent\",\n                    outline: \"none\",\n                    resize: \"none\"\n                  }}\n                ></textarea>\n              </Box>\n              <Flex\n                p={3}\n                width={1 / 2}\n                color=\"black\"\n                bg=\"muted\"\n                flexDirection={\"column\"}\n                justifyContent={\"space-between\"}\n                alignItems={\"center\"}\n                flexGrow={1}\n              >\n                <Box px={2} py={1} width={1} flexGrow={1} ref={this.expRef}>\n                  <MarkdownRenderer markdown={this.state.markdown} />\n                </Box>\n                <Flex\n                  px={2}\n                  py={1}\n                  width={1}\n                  flexShrink={1}\n                  justifyContent={\"space-around\"}\n                >\n                  <Pdf targetRef={this.expRef} filename={this.state.documentTitle + \".pdf\"}>\n                    {({ toPdf }) => (\n                      <Button\n                        onClick={toPdf}\n                        sx={{\n                          transition: \"0.4s\",\n                          \":hover\": {\n                            backgroundColor: \"tomato\",\n                            transition: \"0.2s\"\n                          }\n                        }}\n                      >\n                        Download as PDF\n                      </Button>\n                    )}\n                  </Pdf>\n                  <Button\n                    onClick={this.downloadMd}\n                    sx={{\n                      transition: \"0.4s\",\n                      \":hover\": {\n                        backgroundColor: \"tomato\",\n                        transition: \"0.2s\"\n                      }\n                    }}\n                  >\n                    Download as .md\n                  </Button>\n                </Flex>\n              </Flex>\n            </Flex>\n          </Flex>\n        </ThemeProvider>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}